{"version":3,"file":"js/998.16f5a0a7.js","mappings":"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","sources":["webpack:///../../node_modules/.pnpm/@babel+runtime-corejs3@7.17.8/node_modules/@babel/runtime-corejs3/core-js/instance/fill.js","webpack:///../../node_modules/.pnpm/@babel+runtime-corejs3@7.17.8/node_modules/@babel/runtime-corejs3/core-js/instance/find.js","webpack:///../../node_modules/.pnpm/@babel+runtime-corejs3@7.17.8/node_modules/@babel/runtime-corejs3/core-js/instance/slice.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/actual/instance/fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/actual/instance/find.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/actual/instance/slice.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/es/array/virtual/fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/es/array/virtual/find.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/es/array/virtual/slice.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/es/instance/fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/es/instance/find.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/es/instance/slice.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/features/instance/fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/features/instance/find.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/features/instance/slice.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/internals/array-fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/modules/es.array.fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/modules/es.array.find.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/modules/es.array.slice.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/stable/instance/fill.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/stable/instance/find.js","webpack:///../../node_modules/.pnpm/core-js-pure@3.21.1/node_modules/core-js-pure/stable/instance/slice.js","webpack:///./src/components/virtualized-list/item.tsx","webpack:///./src/components/virtualized-list/index.tsx","webpack:///./src/page/detail.tsx"],"sourcesContent":["module.exports = require(\"core-js-pure/features/instance/fill\");","module.exports = require(\"core-js-pure/features/instance/find\");","module.exports = require(\"core-js-pure/features/instance/slice\");","var parent = require('../../stable/instance/fill');\n\nmodule.exports = parent;\n","var parent = require('../../stable/instance/find');\n\nmodule.exports = parent;\n","var parent = require('../../stable/instance/slice');\n\nmodule.exports = parent;\n","require('../../../modules/es.array.fill');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').fill;\n","require('../../../modules/es.array.find');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').find;\n","require('../../../modules/es.array.slice');\nvar entryVirtual = require('../../../internals/entry-virtual');\n\nmodule.exports = entryVirtual('Array').slice;\n","var isPrototypeOf = require('../../internals/object-is-prototype-of');\nvar method = require('../array/virtual/fill');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.fill;\n  return it === ArrayPrototype || (isPrototypeOf(ArrayPrototype, it) && own === ArrayPrototype.fill) ? method : own;\n};\n","var isPrototypeOf = require('../../internals/object-is-prototype-of');\nvar method = require('../array/virtual/find');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.find;\n  return it === ArrayPrototype || (isPrototypeOf(ArrayPrototype, it) && own === ArrayPrototype.find) ? method : own;\n};\n","var isPrototypeOf = require('../../internals/object-is-prototype-of');\nvar method = require('../array/virtual/slice');\n\nvar ArrayPrototype = Array.prototype;\n\nmodule.exports = function (it) {\n  var own = it.slice;\n  return it === ArrayPrototype || (isPrototypeOf(ArrayPrototype, it) && own === ArrayPrototype.slice) ? method : own;\n};\n","var parent = require('../../actual/instance/fill');\n\nmodule.exports = parent;\n","var parent = require('../../actual/instance/find');\n\nmodule.exports = parent;\n","var parent = require('../../actual/instance/slice');\n\nmodule.exports = parent;\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar un$Slice = require('../internals/array-slice');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return un$Slice(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","var parent = require('../../es/instance/fill');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/find');\n\nmodule.exports = parent;\n","var parent = require('../../es/instance/slice');\n\nmodule.exports = parent;\n","import {\n  forwardRef,\n  useEffect,\n  useState,\n  type ForwardRefRenderFunction\n} from 'react'\n\ninterface ItemProps {\n  index: number\n  cachePosition: (node: Element | null, index: number) => void\n}\nconst VirtualizeItem: ForwardRefRenderFunction<HTMLDivElement, ItemProps> = (\n  props,\n  ref\n) => {\n  const { index, cachePosition } = props\n  const [node, setNode] = useState<HTMLElement | null>(null)\n\n  return (\n    <div\n      className=\"h-60\"\n      ref={element => {\n        setNode(element)\n      }}\n    >\n      <p>#${index} el是对的igendi voluptatem quisquam</p>\n      <p>\n        Modi autem fugiat maiores. Doloremque est sed quis qui nobis. Accusamus\n        dolorem aspernatur sed rem.\n      </p>\n    </div>\n  )\n}\n\nexport default forwardRef(VirtualizeItem)\n","/**\n * 虚拟列表组件\n */\n\nimport {\n  UIEventHandler,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n  type FC\n} from 'react'\nimport { nanoid } from 'nanoid'\nimport VirtualizeItem from './item'\n\nconst height = 60\nconst bufferSize = 5\n\ninterface VirtualizedListProps {\n  scrollWrapDom?: HTMLElement\n}\n\ninterface AnchorItem {\n  index: number\n  top: number\n  bottom: number\n}\n\nconst VirtualizedList: FC<VirtualizedListProps> = props => {\n  const { scrollWrapDom = document.getElementById('scroll')! } = props\n  const [visibleData, setVisibleData] = useState(new Array(1000).fill(true))\n  //   开始和结束时的index,遵循左闭右开的原则\n  const [{ startIndex, endIndex }, setIndexInfo] = useState({\n    startIndex: 0,\n    endIndex: 0\n  })\n  //   开始和结束时候的offset\n  const [{ startOffset, endOffset }, setOffset] = useState({\n    startOffset: 0,\n    endOffset: 0\n  })\n  //   滚动的距离\n  const [scrollTop, setScrollTop] = useState(0)\n  //  当前可视的数量\n  const [visibleCount, setVisibleCount] = useState(\n    Math.ceil((scrollWrapDom || document.body).clientHeight / height)\n  )\n  // 记录已经渲染元素的位置信息\n  const anchorList = useRef<AnchorItem[]>([])\n  // 锚点元素相关的位置信息\n  const [{ index, top, bottom }, setAnchorItem] = useState({\n    index: 0,\n    top: 0,\n    bottom: 0\n  })\n  /**\n   * 更新可视区域的数据\n   */\n  const updateVisibleData = useCallback(() => {\n    const data = visibleData.slice(startIndex, endIndex)\n    const endOffset = (data.length - endIndex) * height\n    setOffset({\n      startOffset,\n      endOffset\n    })\n    setVisibleData(data)\n  }, [visibleData, startIndex, endIndex, startOffset])\n  /**\n   * 计算渲染的元素个数,并进行设置渲染的数据\n   */\n  useEffect(() => {\n    // setVisibleCount(\n    //   Math.ceil((scrollWrapDom || document.body).clientHeight / height) +\n    //     bufferSize\n    // )\n    // setIndexInfo({\n    //   startIndex,\n    //   endIndex: startIndex + visibleCount\n    // })\n    // updateVisibleData()\n  }, [scrollWrapDom, startIndex, updateVisibleData, visibleCount])\n\n  // 更新某一个信息\n  const cachePosition = (node: Element | null, index: number) => {\n    const rect = node?.getBoundingClientRect()\n    const top = rect?.top ?? 0 + scrollWrapDom.scrollHeight\n    anchorList.current.push({\n      index,\n      top,\n      bottom: top + height\n    })\n  }\n  const handleScroll: UIEventHandler<HTMLDivElement> = e => {\n    const { scrollTop: newScrollTop } = e.target as HTMLDivElement\n    if (newScrollTop > scrollTop) {\n      if (scrollTop > bottom) {\n        updateBoundaryIndex(newScrollTop)\n        updateVisibleData()\n      }\n    } else if (newScrollTop < scrollTop) {\n      if (newScrollTop < top) {\n        updateBoundaryIndex(newScrollTop)\n        updateVisibleData()\n      }\n    }\n    setScrollTop(newScrollTop)\n  }\n  // 计算startIndex和endIndex\n  const updateBoundaryIndex = (scrollTop = 0) => {\n    const anchorItem = anchorList.current.find(item => item.bottom >= scrollTop)\n    if (!anchorItem) {\n      return\n    }\n    setAnchorItem({ ...anchorItem })\n\n    setIndexInfo({\n      startIndex: anchorItem.index,\n      endIndex: anchorItem.index + visibleCount\n    })\n  }\n\n  return (\n    <div\n      onScroll={handleScroll}\n      id=\"scroll\"\n      style={{ height: '500px', overflow: 'auto' }}\n    >\n      <div\n        style={{\n          paddingTop: `${startOffset}px`,\n          paddingBottom: `${endOffset}px`\n        }}\n      >\n        {/* 虚拟列表 */}\n        {visibleData.map((item, index) => {\n          return (\n            <VirtualizeItem\n              key={nanoid()}\n              index={index}\n              cachePosition={cachePosition}\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default VirtualizedList\n","import { type FC } from 'react'\nimport { Route, Routes, useNavigate } from 'react-router-dom'\nimport VirtualizedList from '@/components/virtualized-list'\n\nconst Detail: FC = () => {\n  const navigate = useNavigate()\n\n  return (\n    <div>\n      <div>detail page</div>\n      <button\n        type=\"button\"\n        onClick={() => {\n          navigate('/detail/13')\n        }}\n      >\n        to detail Id page\n      </button>\n      <Routes>\n        <Route\n          path=\"/\"\n          element={\n            <h1>我是detail的根路径，这里的/是相对于detail父路径匹配的内容</h1>\n          }\n        />\n        {/* index的优先级要高一点 */}\n        <Route\n          index\n          element={\n            <div>\n              <VirtualizedList />\n            </div>\n          }\n        />\n      </Routes>\n    </div>\n  )\n}\nexport default Detail\n"],"names":["module","exports","parent","entryVirtual","fill","find","slice","isPrototypeOf","method","ArrayPrototype","Array","prototype","it","own","toObject","toAbsoluteIndex","lengthOfArrayLike","value","O","this","length","argumentsLength","arguments","index","undefined","end","endPos","$","addToUnscopables","target","proto","$find","FIND","SKIPS_HOLES","forced","callbackfn","global","isArray","isConstructor","isObject","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","un$Slice","HAS_SPECIES_SUPPORT","SPECIES","max","Math","start","Constructor","result","n","k","fin","constructor","VirtualizeItem","props","ref","cachePosition","node","setNode","useState","_jsxs","className","element","children","_jsx","forwardRef","scrollWrapDom","document","getElementById","visibleData","setVisibleData","startIndex","endIndex","setIndexInfo","startOffset","endOffset","setOffset","scrollTop","setScrollTop","visibleCount","setVisibleCount","ceil","body","clientHeight","anchorList","useRef","top","bottom","setAnchorItem","updateVisibleData","useCallback","data","useEffect","rect","getBoundingClientRect","scrollHeight","current","push","updateBoundaryIndex","anchorItem","item","onScroll","e","newScrollTop","id","style","height","overflow","paddingTop","paddingBottom","nanoid","navigate","useNavigate","type","onClick","Routes","Route","path","VirtualizedList"],"sourceRoot":""}